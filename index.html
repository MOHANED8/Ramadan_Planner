<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description"
        content="مخطط رمضان الذهبي الفاخر - خطط شهرك المبارك مع جداول القرآن والرياضة والأذكار | Premium Ramadan Planner - Track Quran, Workouts & Daily Schedule">
    <!-- AdSense Removed -->
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https:; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    <title>مخطط رمضان الذهبي الفاخر</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <meta name="theme-color" content="#d4af37">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="certificate.css">
</head>

<body>

    <div class="container">
        <!-- ========== PREMIUM HEADER ========== -->
        <header class="premium-header">
            <!-- Language Switcher -->
            <div class="lang-container no-print">
                <select id="lang-switch">
                    <option value="ar">🇸🇦 العربية</option>
                    <option value="en">🇬🇧 English</option>
                </select>
            </div>

            <div class="gold-separator">
                <span class="line"></span>
                <span class="icon">✨</span>
                <span class="line"></span>
            </div>

            <!-- Gamification: Streak Counter -->
            <div id="streak-counter"></div>

            <h1 data-i18n="title">مخطط رمضان الذهبي الفاخر <span class="hijri-year"></span></h1>

            <!-- Editable Personalization -->
            <div class="name-container">
                <input type="text" id="user-name" data-i18n="namePlaceholder" placeholder="اكتب اسمك هنا"
                    autocomplete="off">
            </div>



            <!-- Location & Prayer Times Control -->
            <div class="location-control no-print">
                <button id="btn-location" class="btn-primary" data-i18n="locationBtn">
                    📍 تحديد موقعي (أوقات الصلاة)
                </button>

                <button id="btn-install" class="btn-secondary" style="display: none;">
                    📲 تثبيت التطبيق
                </button>

                <div id="location-status"></div>
            </div>

            <!-- Daily Affirmation -->
            <div id="daily-verse"></div>

            <!-- Certificate Achievement Banner -->
            <div class="certificate-banner no-print">
                <div class="cert-banner-title">
                    🏆 <span data-i18n="certificateBannerTitle">نظام شهادة الإنجاز</span> 🏆
                </div>
                <div class="cert-banner-desc">
                    <span data-i18n="certificateBannerDesc">أكمل 75% من المهام اليومية (9 من 12) لتحصل على شهادة إنجاز
                        رمضانية فاخرة!</span>
                </div>
                <div class="progress-container">
                    <div id="global-progress-bar">
                        <span id="global-progress-text">0%</span>
                    </div>
                </div>
                <div class="cert-banner-stats">
                    ✅ <span id="completed-tasks-count">0</span> / <span id="total-tasks-count">360</span> <span
                        data-i18n="tasksCompleted">مهمة مكتملة</span>
                </div>
            </div>

            <div class="gold-separator">
                <span class="line"></span>
                <span class="icon">✧</span>
                <span class="line"></span>
            </div>
        </header>

        <!-- ========== QURAN TRACKER ========== -->
        <section>
            <h2 class="section-title" data-i18n="quranTitle">
                📖 جدول تتبع ختم القرآن الكريم</h2>
            <div class="table-wrapper">
                <table class="table-gold">
                    <thead>
                        <tr>
                            <th data-i18n="quranDay">اليوم</th>
                            <th data-i18n="quranFrom">من صفحة</th>
                            <th data-i18n="quranTo">إلى صفحة</th>
                        </tr>
                    </thead>
                    <tbody id="quran-table-body">
                        <!-- Javascript will populate this -->
                    </tbody>
                </table>
            </div>
        </section>



        <!-- ========== WORKOUT PROGRAM ========== -->
        <section>
            <h2 class="section-title" data-i18n="workoutTitle">
                🏋️ برنامج القوة والمرونة – تعريف العضلات</h2>
            <div class="table-wrapper">
                <table class="table-gold sports-table">
                    <thead>
                        <tr>
                            <th data-i18n="workoutDay">اليوم</th>
                            <th data-i18n="workoutFocus">التركيز</th>
                            <th data-i18n="workoutDetails">تفاصيل التمرين</th>
                        </tr>
                    </thead>
                    <tbody id="sports-table-body">
                        <!-- Javascript will populate this -->
                    </tbody>
                </table>
            </div>
            <p style="color: var(--text-muted); font-size: 0.95rem; margin-top: 10px;" data-i18n="workoutNote">✏️ دوّن
                الأوزان المستخدمة
                وملاحظاتك عن الشد العضلي.</p>
        </section>

        <!-- ========== DAILY SCHEDULE ========== -->
        <section>
            <h2 class="section-title" data-i18n="scheduleTitle">
                🗓️ الجدول اليومي الفاخر</h2>
            <div id="days-container" class="days-container">
                <!-- Javascript will populate this -->
            </div>
        </section>



        <!-- ========== FOOTER ========== -->
        <footer class="premium-footer no-print">
            <div class="footer-content">
                <div>🌟 رمضان <span class="hijri-year"></span></div>
                <div style="font-weight: 700; color: var(--gold-secondary); margin: 10px 0;" data-i18n="footerTitle">
                    Premium Ramadan Edition
                </div>
                <div data-i18n="footerDua">🌙 اللَّهُمَّ بَارِكْ لَنَا فِي رَجَبَ وَشَعْبَانَ وَبَلِّغْنَا رَمَضَانَ
                </div>
            </div>
        </footer>
    </div>

    <!-- Logic -->
    <script src="js/app.js" type="module"></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => {
                        // Service Worker registered successfully
                    })
                    .catch(err => {
                        // Service Worker registration failed
                    });
            });
        }
    </script>
    <!-- Hatmah Doa Modal -->
    <div id="hatmah-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 data-i18n="hatmahTitle">✨ دعاء ختم القرآن الكريم ✨</h2>
            <div class="doa-text">
                اللَّهُمَّ ارْحَمْنِي بِالْقُرْآنِ وَاجْعَلْهُ لِي إِمَامًا وَنُورًا وَهُدًى وَرَحْمَةً *
                اللَّهُمَّ ذَكِّرْنِي مِنْهُ مَا نَسِيتُ وَعَلِّمْنِي مِنْهُ مَا جَهِلْتُ وَارْزُقْنِي تِلَاوَتَهُ
                آنَاءَ اللَّيْلِ وَأَطْرَافَ النَّهَارِ وَاجْعَلْهُ لِي حُجَّةً يَا رَبَّ الْعَالَمِينَ *
                اللَّهُمَّ أَصْلِحْ لِي دِينِي الَّذِي هُوَ عِصْمَةُ أَمْرِي، وَأَصْلِحْ لِي دُنْيَايَ الَّتِي فِيهَا
                مَعَاشِي، وَأَصْلِحْ لِي آخِرَتِي الَّتِي فِيهَا مَعَادِي، وَاجْعَلِ الْحَيَاةَ زِيَادَةً لِي فِي كُلِّ
                خَيْرٍ وَاجْعَلِ الْمَوْتَ رَاحَةً لِي مِنْ كُلِّ شَرٍّ *
                اللَّهُمَّ اجْعَلْ خَيْرَ عُمْرِي آخِرَهُ وَخَيْرَ عَمَلِي خَوَاتِمَهُ وَخَيْرَ أَيَّامِي يَوْمَ
                أَلْقَاكَ فِيهِ *
                اللَّهُمَّ إِنِّي أَسْأَلُكَ عِيشَةً هَنِيَّةً وَمِيتَةً سَوِيَّةً وَمَرَدًّا غَيْرَ مُخْزٍ وَلَا
                فَاضِحٍ *
                اللَّهُمَّ إِنِّي أَسْأَلُكَ خَيْرَ الْمَسْأَلَةِ وَخَيْرَ الدُّعَاءِ وَخَيْرَ النَّجَاحِ وَخَيْرَ
                الْعِلْمِ وَخَيْرَ الْعَمَلِ وَخَيْرَ الثَّوَابِ وَخَيْرَ الْحَيَاةِ وَخَيْرَ الْمَمَاتِ وَثَبِّتْنِي
                وَثَقِّلْ مَوَازِينِي وَحَقِّقْ إِيمَانِي وَارْفَعْ دَرَجَتِي وَتَقَبَّلْ صَلَاتِي وَاغْفِرْ خَطِيئَاتِي
                وَأَسْأَلُكَ الْعُلَا مِنَ الْجَنَّةِ *
            </div>
            <button id="close-hatmah-btn" data-i18n="closeBtn">آمين</button>
        </div>
    </div>

    <!-- Certificate Modal -->
    <div id="certificate-modal" class="modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="certificate-wrapper">
            <div id="certificate" class="certificate">
                <div class="certificate-border">
                    <div class="certificate-inner">
                        <div class="cert-corner cert-corner-tl"></div>
                        <div class="cert-corner cert-corner-tr"></div>
                        <div class="cert-corner cert-corner-bl"></div>
                        <div class="cert-corner cert-corner-br"></div>

                        <div class="cert-header">
                            <div class="cert-icon">🌙</div>
                            <h1 class="cert-title" data-i18n="certTitle">شهادة تقدير</h1>
                            <div class="cert-subtitle" data-i18n="certSubtitle">مخطط رمضان الذهبي الفاخر</div>
                        </div>

                        <div class="cert-body">
                            <p class="cert-text" data-i18n="certText">تُمنح هذه الشهادة تقديراً للإنجاز المتميز</p>
                            <div class="cert-name-line">
                                <span class="cert-to" data-i18n="certTo">إلى:</span>
                                <span id="cert-user-name" class="cert-name"></span>
                            </div>
                            <p class="cert-achievement">
                                <span data-i18n="certAchievement">لإتمام</span>
                                <strong id="cert-percentage" class="cert-highlight">0%</strong>
                                <span data-i18n="certOf">من المهام اليومية</span>
                            </p>
                            <p class="cert-day">
                                <span data-i18n="certDay">اليوم</span>
                                <strong id="cert-day-number" class="cert-highlight">1</strong>
                                <span data-i18n="certFromRamadan">من رمضان المبارك</span>
                            </p>
                            <p class="cert-message" data-i18n="certMessage">بارك الله في جهودك وتقبل منك صالح الأعمال
                            </p>
                        </div>

                        <div class="cert-footer">
                            <div class="cert-date">
                                <div id="cert-hijri-date"></div>
                                <div id="cert-gregorian-date"></div>
                            </div>
                            <div class="cert-seal">
                                <div class="seal-circle">
                                    <div class="seal-star">★</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="certificate-actions">
                <button id="download-cert" class="cert-btn cert-btn-primary">
                    <span data-i18n="certDownload">📥 تحميل الشهادة</span>
                </button>
                <button id="print-cert" class="cert-btn cert-btn-secondary">
                    <span data-i18n="certPrint">🖨️ طباعة</span>
                </button>
                <button id="close-cert" class="cert-btn cert-btn-close">
                    <span data-i18n="certClose">✖ إغلاق</span>
                </button>
            </div>
        </div>
    </div>

    <canvas id="confetti-canvas"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; display: none;"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
        integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</body>

</html>